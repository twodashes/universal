{"version":3,"sources":["objects.js"],"names":["objects_are_equal","obj1","obj2","JSON","stringify","object_keys_from_array_values","arr","value","obj","obj_first_value","key","obj_first_entry","obj_is_empty","prop","Object","prototype","hasOwnProperty","call","json_parse","variable","includes","parse","e","replace","obj_merge","keys","Set","obj1v","obj2v","Array","isArray","window","browser","func","__"],"mappings":"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","file":"objects.map","sourceRoot":"../esm","sourcesContent":["/**\n * @param {object} obj1\n * @param {object} obj2\n * @returns {boolean} - true if equal\n */\nconst objects_are_equal = function objects_are_equal(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2)\n};\n\n/**\n * Create an object from array. Object's keys will made from Array's values.\n *    Use this to filter an array, keep only unique values, and maybe make something of them.\n *    This might be faster than using ES6 `[...new Set(...arr)]`, because it loops only once.\n * @param {array} arr - array values will be used, keys ignored\n * @param {*} value - any value to assign to each new item in object. Default value = true.\n * @returns {object} - from array values. Duplicate array values have been removed.\n */\nconst object_keys_from_array_values = function obj_from_array(arr, value=true) {\n  let obj = {};\n  for (let key of arr) {\n    obj[key] = value;\n  }\n  return obj\n};\n\n/**\n * Return the first value in an object\n *    Iterate the object only once. Return the first value.\n * @param {object} obj\n * @returns value of first item in object\n */\nconst obj_first_value = function obj_first_value(obj) {\n  for (let key in obj) { // doesn't loop, but that's the point!\n    return obj[key]\n  }\n};\n\n/**\n * Return the first entry (key and value tuple) in an object\n *    Iterate the object only once. Return the first entry.\n * @param {object} obj\n * @returns value of first item in object\n */\nconst obj_first_entry = function obj_first_value(obj) {\n  for (let key in obj) { // doesn't loop, but that's the point!\n    return [key, obj[key]]\n  }\n};\n\n/**\n * @param {object} obj\n * @returns {boolean} - true if empty\n */\nconst obj_is_empty = function obj_is_empty(obj) {\n  for (let prop in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n      return false\n    }\n  }\n  return true\n};\n\n/**\n * Parse JSON variable - recursively\n * @param {*} value - Any variable type\n * @returns {*} value - Intelligently parsed. Note: Will convert stringified number to type number!\n * NOTE: JSON can not stringify ES6 types Set and Map. Stringify/parse, changes value to empty object.\n * As a workaround, before stringifying, convert Set to Array, and Map to Array of tuples.\n */\nconst json_parse = function json_parse(value) {\n  let variable;\n  // Simple parse variable\n  if (typeof value === \"string\" && (value.includes(\"[\") || value.includes(\"{\"))) {\n    try {\n      variable = JSON.parse(value); // JSON stringified array or object\n    } catch (e) {\n      try {\n        variable = JSON.parse(value.replace(/[\\r\\n]+/g, \"\").replace(/[\\t]+/g, \" \")); // edge case\n      } catch (e) {\n        variable = value.includes(\"[\") ? [] : {}; // broken JSON array or object\n      }\n    }\n  } else if (value === \"true\" || value === \"false\" || \"null\" || \"undefined\") {\n    // boolean/null should NOT have been stringified\n    variable = value; // string\n  } else {\n    // simple value (JSON.parse converts numbers in quotes to type number)\n    try {\n      variable = JSON.parse(value); // number\n    } catch (e) {\n      variable = value; // string or undefined\n    }\n  }\n  // Parse recursively - if Object/Array\n  if (typeof variable === \"object\") {\n    // iterate all props/values\n    for (let key in variable) {\n      if (!variable.hasOwnProperty(key)) continue\n      // parse each prop/value\n      variable[key] = json_parse(variable[key]);\n    }\n  }\n\n  return variable\n};\n\n/**\n * Merge key/values of two objects into one - recursively\n * @param {object} obj1 - First object, the default one\n * @param {object} obj2 - Second object, will overwrite first!\n * @returns {object} obj - Combined object\n */\nconst obj_merge = function obj_merge(obj1, obj2) {\n  // console.log('obj1', JSON.parse(JSON.stringify(obj1)));\n  // console.log('obj2', JSON.parse(JSON.stringify(obj2)));\n  let obj = {};\n  // get keys from both objects\n  let keys = [...new Set([...Object.keys(obj1), ...Object.keys(obj2)])];\n  for (let key of keys) {\n    // both assigned ? then merge\n    if (obj1.hasOwnProperty(key) && obj2.hasOwnProperty(key)) {\n      let obj1v = obj1[key];\n      let obj2v = obj2[key];\n      // if both objects have same key, then merge\n      if (typeof obj1v !== typeof obj2v) {\n        // oh no! same key, but value is different type!\n        obj[key] = obj2v || obj1v;\n        // console.warn('obj_merge(obj1, obj2) could not merge types: key/value type of each must be same: ', typeof obj1v, typeof obj2v);\n      } else {\n        // same type of value - lets try to combine...\n        switch (typeof obj1v) {\n          case \"object\":\n            // type = object\n            if (!!obj2v && !!obj1v) {\n              // both are truthy...\n              if (Array.isArray(obj2v) && Array.isArray(obj1v)) {\n                // both arrays...\n                obj[key] = [...new Set([...obj1[key], ...obj2[key]])];\n              } else if (!Array.isArray(obj2v) && !Array.isArray(obj1v)) {\n                // both dictionaries...\n                obj[key] = obj_merge(obj1[key], obj2[key]);\n              } else {\n                // one is dictionary, other is array.\n                // cannot combine unlike types. Use first...\n                obj[key] = obj1[key];\n              }\n            } else {\n              // at least one is null...\n              obj[key] = obj2v || obj1v;\n            }\n            break\n          default:\n            // type = undefined, function, boolean, string, number\n            obj[key] = obj2v || obj1v;\n            break\n        }\n      }\n    } else if (obj2.hasOwnProperty(key)) {\n      // otherwise, use whichever one has a value\n      obj[key] = obj2[key];\n    } else {\n      // otherwise, use whichever one has a value\n      obj[key] = obj1[key];\n    }\n  }\n  // console.log('obj', obj);\n  return obj\n};\n\n/*\n * EXPORT FOR BROWSER\n */\nif (typeof window === \"object\") {\n  const browser = { json_parse, obj_first_entry, obj_first_value, obj_is_empty, obj_merge, object_keys_from_array_values, objects_are_equal };\n  // set up for export\n  window.__ = window.__ || {};\n  // flatten\n  for (let func in browser) {\n    window.__[func] = browser[func];\n  }\n}\n\nexport { json_parse, obj_first_entry, obj_first_value, obj_is_empty, obj_merge, object_keys_from_array_values, objects_are_equal };\n"]}